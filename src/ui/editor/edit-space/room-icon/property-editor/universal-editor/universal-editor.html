<div class="universal-editor">
  <h2 class="hotspot-inspector__label">
    Hotspot Tool
  </h2>

  <div class="hotspot-inspector__title">
    <text-input
      [textModel]="universalProperty.getName()"
      [isHotspotTitle]="true"
      (onTextChange)="onNameChange($event)">
    </text-input>
  </div>

  <br>

  <div class="tab-container">
    <div class="tabs">
      <input id="tab-universal-image" type="radio" name="tabs" (change)="onChangeActiveTab($event, TABS.IMAGE)"
             [checked]="activeTab === TABS.IMAGE">
      <label for="tab-universal-image" class="tab">
        <div class="universal-editor__tab-icon list-icon__image"></div>
        Image
      </label>

      <input id="tab-universal-text" type="radio" name="tabs" (change)="onChangeActiveTab($event, TABS.TEXT)"
             [checked]="activeTab === TABS.TEXT">
      <label for="tab-universal-text" class="tab">
        <div class="universal-editor__tab-icon list-icon__text"></div>
        Text
      </label>

      <input id="tab-universal-audio" type="radio" name="tabs" (change)="onChangeActiveTab($event, TABS.AUDIO)"
             [checked]="activeTab === TABS.AUDIO">
      <label for="tab-universal-audio" class="tab">
        <div class="universal-editor__tab-icon list-icon__audio"></div>
        Audio
      </label>
    </div>

    <section id="content-universal-image" [ngClass]="{'active': activeTab === TABS.IMAGE}" droppable
             (onFileLoad)="onImageFileLoad($event)" [acceptedFileType]="'image'">
      <file-loader
        (onFileLoad)="onImageFileLoad($event)"
        [acceptedFileType]="'image'"
        class="universal-editor__file-loader">
      </file-loader>

      <div class="universal-editor__image-wrapper">
        <dropzone *ngIf="!hasImageContent()" [message]="'Drag images here to upload'" (success)="onUploadSuccess($event)" [attr.src]="universalProperty.imageContent.getBinaryFileData()"></dropzone>
        <img *ngIf="hasImageContent()"
        [attr.src]="universalProperty.imageContent.getBinaryFileData()"
        class="universal-editor__image-display">
        <h1 class="name">{{title}}</h1>
        <svg *ngIf="hasImageContent()" class="check" width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>Check</title><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path></g></svg>
      </div>

      <div *ngIf="hasImageContent()" class="universal-editor__image-rotate">
        <button type="button" (click)="onRotateImage()">
          <img src="assets/icons/rotate-icon-default.png" alt="Rotate" class="default">
          <img src="assets/icons/rotate-icon-hover-active.png" alt="Rotate" class="active">
        </button>
      </div>
    </section>

    <section id="content-universal-text" [ngClass]="{'active': activeTab === TABS.TEXT}">
      <p class="hotspot-inspector__label">
        Enter Text:
      </p>
      <textarea
        maxlength="245"
        name="textarea"
        class="universal-editor__text-area"
        [(ngModel)]="textContent">
      </textarea>

      <p class="universal-editor__text-chars-counter">{{245 - (universalProperty.textContent &&
        universalProperty.textContent.length || 0)}} characters left</p>
    </section>

    <section id="content-universal-audio" [ngClass]="{'active': activeTab === TABS.AUDIO}" droppable
             (onFileLoad)="onAudioFileLoad($event)" [acceptedFileType]="'audio'">
      <div>
        <p class="hotspot-inspector__label play-loop-label">
          Play loop
        </p>

        <checkbox
          [initialValue]="getLoopState()"
          (changeEmitter)="onLoopChange($event)">
        </checkbox>
      </div>

      <div class="hotspot-inspector_row">
        <file-loader
          (onFileLoad)="onAudioFileLoad($event)"
          [acceptedFileType]="'audio'"
          [maxFileSize]="50"
          class="universal-editor__file-loader">
        </file-loader>

        <audio-recorder
          *ngIf="showAudioRecorder()"
          [maxRecordTime]="30"
          (onRecorded)="onAudioRecorded($event)"
          class="universal-editor__record-button">
        </audio-recorder>
      </div>
      <audio-element 
        *ngIf="hasAudioContent()"
        (volumechange)="onVolumeChange($event)"
        [volume]="universalProperty.volume"
        [loop]="universalProperty.loop"
        [src]="universalProperty.audioContent.getObjectUrl() | urlSanitize">
      </audio-element>
    </section>
  </div>

  <div
    *ngIf="hasImageContent()"
    class="property-editor__delete-button"
    (click)="onDeleteTabData()">
    Delete {{ activeTabName }}
  </div>
</div>
